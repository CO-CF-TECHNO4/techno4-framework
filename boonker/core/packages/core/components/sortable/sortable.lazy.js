(function techno4ComponentLoader(t,e){void 0===e&&(e=!0);var s=t.$,o=t.utils,a=(t.getDevice,t.getSupport),l=(t.Class,t.Modal,t.ConstructorMethods,t.ModalMethods,t.$jsx,o.bindMethods);const n={init(){const t=this;let e,o,l,n,r,i,d,p,b,c,u,g,v,h,m,f,x,C,w,M,T;function I(a,n){o=!1,e=!0,T=!1,l="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY,r=s(a.target).closest("li").eq(0),v=r.index(),d=r.parents(".sortable");const p=r.parents(".list-group");p.length&&p.parents(d).length&&(d=p),i=d.children("ul").children("li:not(.disallow-sorting):not(.no-sorting)"),t.panel&&(t.panel.allowOpen=!1),t.swipeout&&(t.swipeout.allow=!1),n&&(r.addClass("sorting"),d.addClass("sortable-sorting"),T=!0)}const L=!!a().passiveListener&&{passive:!1,capture:!1};s(document).on(t.touchEvents.start,".list.sortable .sortable-handler",I,L),t.on("touchmove:active",(function(a){if(!e||!r)return;const v="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY;if(!o){h=r.parents(".page"),m=r.parents(".page-content");const t=parseInt(m.css("padding-top"),10),e=parseInt(m.css("padding-bottom"),10);M=m[0].scrollTop,x=h.offset().top+t,f=h.height()-t-e,r.addClass("sorting"),d.addClass("sortable-sorting"),C=r[0].offsetTop,b=r[0].offsetTop,c=r.parent().height()-C-r.height(),p=r[0].offsetHeight,w=r.offset().top}o=!0,a.preventDefault(),a.t4PreventSwipePanel=!0,n=v-l;const T=m[0].scrollTop-M,I=Math.min(Math.max(n+T,-b),c);r.transform(`translate3d(0,${I}px,0)`);const L=44;let E,$=!0;n+T+L<-b&&($=!1),n+T-L>c&&($=!1),g=void 0,u=void 0,$&&(w+n+p+L>x+f&&(E=w+n+p+L-(x+f)),w+n<x+L&&(E=w+n-x-L),E&&(m[0].scrollTop+=E)),i.each((e=>{const o=s(e);if(o[0]===r[0])return;const a=o[0].offsetTop,l=o.height(),n=C+I;let i;const b=o[0].t4Translate;n>=a-l/2&&r.index()<o.index()?(i=-p,o.transform(`translate3d(0, ${i}px,0)`),u=o,g=void 0):n<=a+l/2&&r.index()>o.index()?(i=p,o[0].t4Translate=i,o.transform(`translate3d(0, ${i}px,0)`),u=void 0,g||(g=o)):(i=void 0,o.transform("translate3d(0, 0%,0)")),b!==i&&(o.trigger("sortable:move"),t.emit("sortableMove",o[0],d[0])),o[0].t4Translate=i}))})),t.on("touchend:passive",(function(){if(!e||!o)return e&&!o&&(t.panel&&(t.panel.allowOpen=!0),t.swipeout&&(t.swipeout.allow=!0),T&&(r.removeClass("sorting"),d.removeClass("sortable-sorting"))),e=!1,void(o=!1);let s;t.panel&&(t.panel.allowOpen=!0),t.swipeout&&(t.swipeout.allow=!0),i.transform(""),r.removeClass("sorting"),d.removeClass("sortable-sorting"),u?s=u.index():g&&(s=g.index());let a=d.dataset().sortableMoveElements;if(void 0===a&&(a=t.params.sortable.moveElements),a&&(u&&r.insertAfter(u),g&&r.insertBefore(g)),(u||g)&&d.hasClass("virtual-list")){v=r[0].t4VirtualListIndex,void 0===v&&(v=r.attr("data-virtual-list-index")),g?(s=g[0].t4VirtualListIndex,void 0===s&&(s=g.attr("data-virtual-list-index"))):(s=u[0].t4VirtualListIndex,void 0===s&&(s=u.attr("data-virtual-list-index"))),s=null!==s?parseInt(s,10):void 0;const t=d[0].t4VirtualList;v&&(v=parseInt(v,10)),s&&(s=parseInt(s,10)),t&&t.moveItem(v,s)}void 0===s||Number.isNaN(s)||s===v||(r.trigger("sortable:sort",{from:v,to:s}),t.emit("sortableSort",r[0],{from:v,to:s,el:r[0]},d[0])),g=void 0,u=void 0,e=!1,o=!1})),s(document).on("taphold",".sortable-tap-hold",((t,e)=>{I(e,!0)}))},enable(t){void 0===t&&(t=".list.sortable");const e=s(t);0!==e.length&&(e.addClass("sortable-enabled"),e.trigger("sortable:enable"),this.emit("sortableEnable",e[0]))},disable(t){void 0===t&&(t=".list.sortable");const e=s(t);0!==e.length&&(e.removeClass("sortable-enabled"),e.trigger("sortable:disable"),this.emit("sortableDisable",e[0]))},toggle(t){void 0===t&&(t=".list.sortable");const e=this,o=s(t);0!==o.length&&(o.hasClass("sortable-enabled")?e.sortable.disable(o):e.sortable.enable(o))}};var r={name:"sortable",params:{sortable:{moveElements:!0}},create(){l(this,{sortable:n})},on:{init(){this.params.sortable&&this.sortable.init()}},clicks:{".sortable-enable":function(t,e){void 0===e&&(e={});this.sortable.enable(e.sortable)},".sortable-disable":function(t,e){void 0===e&&(e={});this.sortable.disable(e.sortable)},".sortable-toggle":function(t,e){void 0===e&&(e={});this.sortable.toggle(e.sortable)}}};if(e){if(t.prototype.modules&&t.prototype.modules[r.name])return;t.use(r),t.instance&&(t.instance.useModuleParams(r,t.instance.params),t.instance.useModule(r))}return r}(techno4, typeof techno4AutoInstallComponent === 'undefined' ? undefined : techno4AutoInstallComponent))
