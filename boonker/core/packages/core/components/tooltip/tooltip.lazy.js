(function techno4ComponentLoader(t,e){void 0===e&&(e=!0);var o=t.$,i=t.utils,a=(t.getDevice,t.getSupport),n=t.Class,r=(t.Modal,t.ConstructorMethods),s=(t.ModalMethods,t.$jsx,i.extend),l=i.deleteProps;class p extends n{constructor(t,e){void 0===e&&(e={}),super(e,[t]);const i=this,n=a(),r=s({},t.params.tooltip);i.useModulesParams(r),i.params=s(r,e),void 0===e.offset&&n.touch&&"hover"===i.params.trigger&&(i.params.offset=10);const{targetEl:l,containerEl:p}=i.params;if(!l&&!i.params.delegated)return i;const c=o(l);if(0===c.length&&!i.params.delegated)return i;if(c[0]&&c[0].t4Tooltip&&!i.params.delegated)return c[0].t4Tooltip;let d=o(p||t.$el).eq(0);0===d.length&&(d=t.$el);const h=o(i.render()).eq(0);s(i,{app:t,$targetEl:c,targetEl:c&&c[0],$containerEl:d,containerEl:d&&d[0],$el:h,el:h&&h[0],text:i.params.text||"",visible:!1,opened:!1}),c[0]&&(c[0].t4Tooltip=i);const g={};let u;function m(){i.opened?i.hide():i.show(this)}function f(t){i.opened&&(o(t.target).closest(c).length||o(t.target).closest(i.$el).length)||i.hide()}function v(t){u||(u=!0,g.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,g.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,i.show(this))}function E(t){if(!u)return;const e="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,o="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY;((e-g.x)**2+(o-g.y)**2)**.5>50&&(u=!1,i.hide())}function $(){u&&(u=!1,i.hide())}function T(){i.show(this)}function w(){i.hide()}function x(){h.hasClass("tooltip-in")||h.removeClass("tooltip-out").remove()}return i.attachEvents=function(){if(h.on("transitionend",x),"click"===i.params.trigger)return i.params.delegated?o(document).on("click",i.params.targetEl,m):i.$targetEl.on("click",m),void o("html").on("click",f);if("manual"!==i.params.trigger)if(n.touch){const e=!!n.passiveListener&&{passive:!0};i.params.delegated?o(document).on(t.touchEvents.start,i.params.targetEl,v,e):i.$targetEl.on(t.touchEvents.start,v,e),t.on("touchmove",E),t.on("touchend:passive",$)}else i.params.delegated?(o(document).on(n.pointerEvents?"pointerenter":"mouseenter",i.params.targetEl,T,!0),o(document).on(n.pointerEvents?"pointerleave":"mouseleave",i.params.targetEl,w,!0)):(i.$targetEl.on(n.pointerEvents?"pointerenter":"mouseenter",T),i.$targetEl.on(n.pointerEvents?"pointerleave":"mouseleave",w))},i.detachEvents=function(){if(h.off("transitionend",x),"click"===i.params.trigger)return i.params.delegated?o(document).on("click",i.params.targetEl,m):i.$targetEl.off("click",m),void o("html").off("click",f);if("manual"!==i.params.trigger)if(n.touch){const e=!!n.passiveListener&&{passive:!0};i.params.delegated?o(document).off(t.touchEvents.start,i.params.targetEl,v,e):i.$targetEl.off(t.touchEvents.start,v,e),t.off("touchmove",E),t.off("touchend:passive",$)}else i.params.delegated?(o(document).off(n.pointerEvents?"pointerenter":"mouseenter",i.params.targetEl,T,!0),o(document).off(n.pointerEvents?"pointerleave":"mouseleave",i.params.targetEl,w,!0)):(i.$targetEl.off(n.pointerEvents?"pointerenter":"mouseenter",T),i.$targetEl.off(n.pointerEvents?"pointerleave":"mouseleave",w))},i.useModules(),i.init(),i}setTargetEl(t){const e=this;return e.detachEvents(),e.$targetEl=o(t),e.targetEl=e.$targetEl[0],e.attachEvents(),e}position(t){const e=this,{$el:i,app:a,$containerEl:n}=e,r=!!e.params.containerEl,s=e.params.offset||0;i.css({left:"",top:""});const l=o(t||e.targetEl),[p,c]=[i.width(),i.height()];let d,h,g,u;i.css({left:"",top:""});const m=r&&n.length?n[0].getBoundingClientRect():a;if(l&&l.length>0){if(d=l.outerWidth(),h=l.outerHeight(),void 0===d&&void 0===h){const t=l[0].getBoundingClientRect();d=t.width,h=t.height}const t=l.offset();g=t.left-m.left,u=t.top-m.top;const e=l.parents(".page");e.length>0&&(u-=e[0].scrollTop)}let[f,v]=[0,0,0],E="top";c+s<u?v=u-c-s:c<m.height-u-h?(E="bottom",v=u+h+s):(E="middle",v=h/2+u-c/2,v<=0?v=8:v+c>=m.height&&(v=m.height-c-8)),"top"===E||"bottom"===E?(f=d/2+g-p/2,f<8&&(f=8),f+p>m.width&&(f=m.width-p-8),f<0&&(f=0)):"middle"===E&&(f=g-p,(f<8||f+p>m.width)&&(f<8&&(f=g+d),f+p>m.width&&(f=m.width-p-8))),i.css({top:`${v}px`,left:`${f}px`})}show(t){const e=this,{$el:i,$targetEl:a,$containerEl:n}=e;n[0]&&i[0]&&!n[0].contains(i[0])&&n.append(i),e.position(t);const r=o(t);return e.visible=!0,e.opened=!0,a.trigger("tooltip:show"),i.trigger("tooltip:show"),r.length&&r[0]!==a[0]&&r.trigger("tooltip:show"),e.emit("local::show tooltipShow",e),i.removeClass("tooltip-out").addClass("tooltip-in"),e}hide(){const t=this,{$el:e,$targetEl:o}=t;return t.visible=!1,t.opened=!1,o.trigger("tooltip:hide"),e.trigger("tooltip:hide"),t.emit("local::hide tooltipHide",t),e.addClass("tooltip-out").removeClass("tooltip-in"),t}render(){const t=this;if(t.params.render)return t.params.render.call(t,t);const{cssClass:e,text:o}=t.params;return`\n        <div class="tooltip ${e||""}">\n          <div class="tooltip-content">${o||""}</div>\n        </div>\n      `.trim()}setText(t){const e=this;return void 0===t||(e.params.text=t,e.text=t,e.$el&&e.$el.children(".tooltip-content").html(t),e.opened&&e.position()),e}init(){this.attachEvents()}destroy(){const t=this;t.$targetEl&&!t.destroyed&&(t.$targetEl.trigger("tooltip:beforedestroy"),t.emit("local::beforeDestroy tooltipBeforeDestroy",t),t.$el.remove(),t.$targetEl[0]&&delete t.$targetEl[0].t4Tooltip,t.detachEvents(),l(t),t.destroyed=!0)}}var c={name:"tooltip",static:{Tooltip:p},create(){const t=this;t.tooltip=r({defaultSelector:".tooltip",constructor:p,app:t,domProp:"t4Tooltip"}),t.tooltip.show=function(t){const e=o(t);if(0===e.length)return;const i=e[0].t4Tooltip;return i?(i.show(e[0]),i):void 0},t.tooltip.hide=function(t){const e=o(t);if(0===e.length)return;const i=e[0].t4Tooltip;return i?(i.hide(),i):void 0},t.tooltip.setText=function(t,e){const i=o(t);if(0===i.length)return;const a=i[0].t4Tooltip;return a?(a.setText(e),a):void 0}},params:{tooltip:{targetEl:null,delegated:!1,text:null,cssClass:null,render:null,offset:0,trigger:"hover",containerEl:void 0}},on:{tabMounted(t){const e=this;o(t).find(".tooltip-init").each((t=>{const i=o(t).attr("data-tooltip");i&&e.tooltip.create({targetEl:t,text:i})}))},tabBeforeRemove(t){o(t).find(".tooltip-init").each((t=>{t.t4Tooltip&&t.t4Tooltip.destroy()}))},pageInit(t){const e=this;t.$el.find(".tooltip-init").each((t=>{const i=o(t).attr("data-tooltip");i&&e.tooltip.create({targetEl:t,text:i})})),"ios"===e.theme&&t.view&&t.view.router.dynamicNavbar&&t.$navbarEl&&t.$navbarEl.length>0&&t.$navbarEl.find(".tooltip-init").each((t=>{const i=o(t).attr("data-tooltip");i&&e.tooltip.create({targetEl:t,text:i})}))},pageBeforeRemove(t){t.$el.find(".tooltip-init").each((t=>{t.t4Tooltip&&t.t4Tooltip.destroy()})),"ios"===this.theme&&t.view&&t.view.router.dynamicNavbar&&t.$navbarEl&&t.$navbarEl.length>0&&t.$navbarEl.find(".tooltip-init").each((t=>{t.t4Tooltip&&t.t4Tooltip.destroy()}))}},vnode:{"tooltip-init":{insert(t){const e=t.elm,i=o(e).attr("data-tooltip");i&&this.tooltip.create({targetEl:e,text:i})},update(t){const e=t.elm;e.t4Tooltip&&t&&t.data&&t.data.attrs&&t.data.attrs["data-tooltip"]&&e.t4Tooltip.setText(t.data.attrs["data-tooltip"])},destroy(t){const e=t.elm;e.t4Tooltip&&e.t4Tooltip.destroy()}}}};if(e){if(t.prototype.modules&&t.prototype.modules[c.name])return;t.use(c),t.instance&&(t.instance.useModuleParams(c,t.instance.params),t.instance.useModule(c))}return c}(techno4, typeof techno4AutoInstallComponent === 'undefined' ? undefined : techno4AutoInstallComponent))
